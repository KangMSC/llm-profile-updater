# 2025년 10월 17일 - LLM 프롬프트 시스템 리팩토링 및 코드 정리

### LLM 프롬프트 시스템 리팩토링

-   **주요 변경사항**:
    -   **프롬프트 외부화**: `src/llm.js` 내에 하드코딩되어 있던 모든 LLM 프롬프트를 `prompts` 디렉토리의 별도 `.txt` 및 `.json` 파일로 분리했습니다.
    -   **동적 프롬프트 구성**: `src/llm.js`에 파일 시스템에서 프롬프트 템플릿을 읽고, 동적으로 데이터를 주입하여 최종 프롬프트를 생성하는 로직 (`getPrompt`, `substitutePrompt` 함수)을 구현했습니다.
    -   **목표**: 코드(로직)와 콘텐츠(프롬프트)를 분리하여 프롬프트의 유지보수성과 가독성을 향상시켰습니다.

### 코드 정리

-   **주요 변경사항**:
    -   **미사용 함수 제거**: `src/llm.js`에서 더 이상 UI에서 사용되지 않는 `generateCharacterImage` 함수를 삭제하여 코드를 정리했습니다.

---

## 2025년 10월 17일 (오후) - LLM 상호작용 로깅 및 UI 표시 기능 구현

### 기능 추가

1.  **LLM 상호작용 로깅 시스템 구축**:
    -   **목표**: LLM 호출에 사용된 프롬프트와 발생한 오류를 사용자가 웹 UI에서 직접 확인하여 디버깅 및 상황 파악을 용이하게 합니다.
    -   **구현 내용**:
        1.  **로깅 모듈 추가 (`src/logger.js`)**: LLM 관련 로그(프롬프트, 오류)를 파일 시스템에 (`logs/llm-io/<캐릭터명>/`) 기록, 조회, 삭제하는 전용 모듈을 새로 생성했습니다.
        2.  **LLM 로직 연동 (`src/llm.js`)**: 모든 LLM API 호출 함수를 수정하여, API 요청 직전에 전체 프롬프트 내용을 파일에 저장하고, 오류 발생 시 해당 오류 메시지를 별도의 파일에 기록하도록 로직을 추가했습니다.
        3.  **웹 UI 연동 (`server.js`)**: 캐릭터 페이지 렌더링 시, `logger.js`를 통해 해당 캐릭터의 프롬프트 및 오류 로그를 모두 읽어옵니다. 읽어온 내용을 "LLM Logs"라는 새로운 UI 섹션에 접고 펼 수 있는 형태로 동적으로 렌더링하여, 사용자가 필요할 때만 상세 내용을 확인할 수 있도록 구현했습니다.